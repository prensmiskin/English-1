<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz â€” Ä°ngilizce â†’ TÃ¼rkÃ§e</title>
<style>
  body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#0f172a; color:#e6eef8; display:flex; align-items:center; justify-content:center; min-height:100vh; margin:0; }
  .card { width:min(820px,95%); background:linear-gradient(180deg,#0b1220 0%, #0d2437 100%); border-radius:14px; padding:28px; box-shadow: 0 10px 30px rgba(2,6,23,0.6); }
  h1 { margin:0 0 6px 0; font-size:20px; letter-spacing:0.2px; color:#cfe8ff; }
  p.sub { margin:0 0 18px 0; color:#9fb7d4; font-size:13px; }
  .display { border-radius:10px; padding:28px; background:rgba(255,255,255,0.02); display:flex; flex-direction:column; align-items:center; gap:14px; margin-bottom:18px; min-height:170px; justify-content:center; }
  .eng { font-size:46px; font-weight:700; letter-spacing:0.6px; color:#eaf6ff; }
  .tur { font-size:28px; color:#a6e3a1; opacity:0; transition:opacity .25s ease; }
  .controls { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
  button { background:#1e293b; color:#e6eef8; border:0; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; }
  button.ghost { background:transparent; border:1px solid rgba(255,255,255,0.06); }
  .progress-wrap { margin-top:12px; display:flex; gap:12px; align-items:center; }
  input[type=range] { width:260px; }
  .meta { color:#9fb7d4; font-size:13px; margin-left:auto; }
  .list-preview { max-height:120px; overflow:auto; margin-top:12px; padding:10px; background:rgba(255,255,255,0.02); border-radius:8px; font-size:13px; color:#cfe8ff; }
  .small { font-size:12px; color:#9fb7d4; }
  .progressbar { width:100%; height:10px; background:rgba(255,255,255,0.06); border-radius:999px; overflow:hidden; }
  .progress { height:100%; width:0%; background:linear-gradient(90deg,#60a5fa,#7c3aed); transition:width .2s linear; }
  footer { margin-top:14px; color:#9fb7d4; font-size:12px; display:flex; justify-content:space-between; align-items:center; gap:12px; }
  a { color:#93c5fd; text-decoration:none; }
  @media (max-width:520px){ .eng{font-size:34px} .tur{font-size:20px} }
</style>
</head>
<body>
Â  <div class="card" role="application" aria-label="Otomatik quiz">
Â  Â  <h1 id="mainTitle">100 DÃ¼zensiz / YaygÄ±n Fiil â€” Ä°ngilizce â†’ TÃ¼rkÃ§e</h1>
Â  Â  <p class="sub">Her kelimenin Ã¶nce Ä°ngilizcesi gÃ¶sterilir â€” <span id="delayVal2">5s</span> sonra TÃ¼rkÃ§esi gÃ¶rÃ¼nÃ¼r â€” <span id="nextVal2">1s</span> sonra sonraki kelimeye geÃ§ilir.</p>

Â  Â  Â  Â  <div class="category-select">
Â  Â  Â  Â  <label><input type="radio" name="category" value="verbs" checked> YaygÄ±n Fiiller (100)</label>
Â  Â  Â  Â  <label><input type="radio" name="category" value="placeAdverbs"> Yer BelirteÃ§leri (20)</label>
Â  Â  </div>

Â  Â  <div class="display" aria-live="polite">
Â  Â  Â  <div class="eng" id="eng">HazÄ±r?</div>
Â  Â  Â  <div class="tur" id="tur">BaÅŸlat dÃ¼ÄŸmesine bas.</div>
Â  Â  </div>

Â  Â  <div class="controls">
Â  Â  Â  <button id="startBtn">BaÅŸlat</button>
Â  Â  Â  <button id="pauseBtn" class="ghost" disabled>Durdur</button>
Â  Â  Â  <button id="restartBtn" class="ghost">BaÅŸtan</button>

Â  Â  Â  <div style="width:8px"></div>

Â  Â  Â  <label class="small" for="delayEng">Ä°ngâ†’TÃ¼rk gecikme (s)</label>
Â  Â  Â  <input id="delayEng" type="range" min="1" max="10" value="5" />
Â  Â  Â  <span class="meta" id="delayVal">5s</span>

Â  Â  Â  <div style="width:12px"></div>

Â  Â  Â  <label class="small" for="delayNext">TÃ¼rkâ†’Sonraki (s)</label>
Â  Â  Â  <input id="delayNext" type="range" min="0" max="5" value="1" />
Â  Â  Â  <span class="meta" id="nextVal">1s</span>
Â  Â  </div>

Â  Â  <div class="progress-wrap" aria-hidden="false">
Â  Â  Â  <div style="width:86%;">
Â  Â  Â  Â  <div class="progressbar" aria-hidden="true"><div class="progress" id="progress"></div></div>
Â  Â  Â  Â  <div class="small" style="margin-top:6px" id="counter">0 / 100</div>
Â  Â  Â  </div>
Â  Â  Â  <div style="width:12%"><button id="exportBtn" class="ghost">Listeyi Kopyala</button></div>
Â  Â  </div>
Â  Â Â 
Â  Â  <div style="margin-top: 10px; display:flex; justify-content:space-between; align-items:flex-end;">
Â  Â  Â  Â  <p style="font-size: 14px; color: #9fb7d4; font-weight: 600; margin-bottom: 0;"><span id="previewTitle">Fiillerin</span> Ã–nizlemesi ve Ã–ÄŸrenilenleri Ä°ÅŸaretleme:</p>
Â  Â  Â  Â  <button id="clearStorageBtn" class="ghost" style="padding: 5px 10px; font-size: 12px;">Ã–ÄŸrenilenleri SÄ±fÄ±rla ðŸ§¹</button>
Â  Â  </div>
Â  Â  <div class="list-preview" id="preview" aria-hidden="true"></div>

Â  Â  <footer>
Â  Â  Â  <div class="small">Kaynak: kullanÄ±cÄ± yÃ¼klemesi â€” <span id="listNameFooter">100 fiil</span> listesi</div>
Â  Â  Â  <div class="small">HazÄ±rlandÄ±ÄŸÄ± an: <strong>Hemen</strong></div>
Â  Â  </footer>
Â  </div>

<script>
/*
Â  Veri KÃ¼meleri: Fiiller ve Yer BelirteÃ§leri ayrÄ± nesnelerde tutuluyor.
*/
const allData = {
Â  Â  verbs: [Â 
Â  Â  Â  {eng:"awake", tr:"uyanmak"},
Â  Â  Â  {eng:"be", tr:"olmak"},
Â  Â  Â  {eng:"beat", tr:"dÃ¶vmek / yenmek"},
Â  Â  Â  {eng:"begin", tr:"baÅŸlamak"},
Â  Â  Â  {eng:"bite", tr:"Ä±sÄ±rmak"},
Â  Â  Â  {eng:"blow", tr:"Ã¼flemek"},
Â  Â  Â  {eng:"break", tr:"kÄ±rmak"},
Â  Â  Â  {eng:"bring", tr:"getirmek"},
Â  Â  Â  {eng:"build", tr:"inÅŸa etmek"},
Â  Â  Â  {eng:"buy", tr:"satÄ±n almak"},
Â  Â  Â  {eng:"catch", tr:"yakalamak"},
Â  Â  Â  {eng:"choose", tr:"seÃ§mek"},
Â  Â  Â  {eng:"come", tr:"gelmek"},
Â  Â  Â  {eng:"cost", tr:"mal olmak"},
Â  Â  Â  {eng:"cut", tr:"kesmek"},
Â  Â  Â  {eng:"do", tr:"yapmak"},
Â  Â  Â  {eng:"deal", tr:"uÄŸraÅŸmak / ilgilenmek"},
Â  Â  Â  {eng:"dig", tr:"kazmak"},
Â  Â  Â  {eng:"dream", tr:"rÃ¼ya gÃ¶rmek"},
Â  Â  Â  {eng:"draw", tr:"Ã§izmek"},
Â  Â  Â  {eng:"drink", tr:"iÃ§mek"},
Â  Â  Â  {eng:"drive", tr:"sÃ¼rmek"},
Â  Â  Â  {eng:"eat", tr:"yemek"},
Â  Â  Â  {eng:"fall", tr:"dÃ¼ÅŸmek"},
Â  Â  Â  {eng:"feed", tr:"beslemek"},
Â  Â  Â  {eng:"feel", tr:"hissetmek"},
Â  Â  Â  {eng:"fight", tr:"kavga etmek"},
Â  Â  Â  {eng:"find", tr:"bulmak"},
Â  Â  Â  {eng:"fly", tr:"uÃ§mak"},
Â  Â  Â  {eng:"forget", tr:"unutmak"},
Â  Â  Â  {eng:"forgive", tr:"affetmek"},
Â  Â  Â  {eng:"freeze", tr:"donmak"},
Â  Â  Â  {eng:"get", tr:"almak"},
Â  Â  Â  {eng:"give", tr:"vermek"},
Â  Â  Â  {eng:"go", tr:"gitmek"},
Â  Â  Â  {eng:"grow", tr:"bÃ¼yÃ¼mek"},
Â  Â  Â  {eng:"hang", tr:"asmak"},
Â  Â  Â  {eng:"have", tr:"sahip olmak"},
Â  Â  Â  {eng:"hear", tr:"duymak"},
Â  Â  Â  {eng:"hide", tr:"saklamak"},
Â  Â  Â  {eng:"hit", tr:"vurmak"},
Â  Â  Â  {eng:"hold", tr:"tutmak"},
Â  Â  Â  {eng:"hurt", tr:"incitmek"},
Â  Â  Â  {eng:"keep", tr:"tutmak"},
Â  Â  Â  {eng:"know", tr:"bilmek"},
Â  Â  Â  {eng:"lay", tr:"koymak"},
Â  Â  Â  {eng:"lead", tr:"yÃ¶netmek / Ã¶ncÃ¼lÃ¼k etmek"},
Â  Â  Â  {eng:"leave", tr:"ayrÄ±lmak / bÄ±rakmak"},
Â  Â  Â  {eng:"lend", tr:"Ã¶dÃ¼nÃ§ vermek"},
Â  Â  Â  {eng:"let", tr:"izin vermek"},
Â  Â  Â  {eng:"lie", tr:"uzanmak"},
Â  Â  Â  {eng:"lose", tr:"kaybetmek"},
Â  Â  Â  {eng:"make", tr:"yapmak"},
Â  Â  Â  {eng:"mean", tr:"anlamÄ±na gelmek"},
Â  Â  Â  {eng:"meet", tr:"tanÄ±ÅŸmak / buluÅŸmak"},
Â  Â  Â  {eng:"pay", tr:"Ã¶demek"},
Â  Â  Â  {eng:"put", tr:"koymak"},
Â  Â  Â  {eng:"quit", tr:"bÄ±rakmak"},
Â  Â  Â  {eng:"read", tr:"okumak"},
Â  Â  Â  {eng:"ride", tr:"binmek"},
Â  Â  Â  {eng:"ring", tr:"Ã§almak (zil/telefon)"},
Â  Â  Â  {eng:"rise", tr:"yÃ¼kselmek"},
Â  Â  Â  {eng:"run", tr:"koÅŸmak"},
Â  Â  Â  {eng:"say", tr:"sÃ¶ylemek"},
Â  Â  Â  {eng:"see", tr:"gÃ¶rmek"},
Â  Â  Â  {eng:"seek", tr:"aramak (Ã§abalamak)"},
Â  Â  Â  {eng:"sell", tr:"satmak"},
Â  Â  Â  {eng:"send", tr:"gÃ¶ndermek"},
Â  Â  Â  {eng:"set", tr:"ayarlamak / koymak"},
Â  Â  Â  {eng:"sew", tr:"dikmek"},
Â  Â  Â  {eng:"shake", tr:"sallamak"},
Â  Â  Â  {eng:"shine", tr:"parlamak"},
Â  Â  Â  {eng:"shoot", tr:"ateÅŸ etmek / vurmak"},
Â  Â  Â  {eng:"show", tr:"gÃ¶stermek"},
Â  Â  Â  {eng:"sing", tr:"ÅŸarkÄ± sÃ¶ylemek"},
Â  Â  Â  {eng:"sink", tr:"batmak"},
Â  Â  Â  {eng:"sit", tr:"oturmak"},
Â  Â  Â  {eng:"sleep", tr:"uyumak"},
Â  Â  Â  {eng:"slide", tr:"kaymak"},
Â  Â  Â  {eng:"speak", tr:"konuÅŸmak"},
Â  Â  Â  {eng:"spend", tr:"harcamak"},
Â  Â  Â  {eng:"spread", tr:"yaymak"},
Â  Â  Â  {eng:"stand", tr:"ayakta durmak"},
Â  Â  Â  {eng:"steal", tr:"Ã§almak"},
Â  Â  Â  {eng:"stick", tr:"yapÄ±ÅŸtÄ±rmak"},
Â  Â  Â  {eng:"strike", tr:"vurmak / grev yapmak"},
Â  Â  Â  {eng:"swear", tr:"kÃ¼fretmek / yemin etmek"},
Â  Â  Â  {eng:"sweep", tr:"sÃ¼pÃ¼rmek"},
Â  Â  Â  {eng:"swell", tr:"ÅŸiÅŸmek"},
Â  Â  Â  {eng:"swim", tr:"yÃ¼zmek"},
Â  Â  Â  {eng:"swing", tr:"sallanmak"},
Â  Â  Â  {eng:"take", tr:"almak"},
Â  Â  Â  {eng:"teach", tr:"Ã¶ÄŸretmek"},
Â  Â  Â  {eng:"tear", tr:"yÄ±rtmak"},
Â  Â  Â  {eng:"tell", tr:"anlatmak"},
Â  Â  Â  {eng:"think", tr:"dÃ¼ÅŸÃ¼nmek"},
Â  Â  Â  {eng:"wear", tr:"giymek"},
Â  Â  Â  {eng:"weep", tr:"aÄŸlamak"},
Â  Â  Â  {eng:"win", tr:"kazanmak"},
Â  Â  Â  {eng:"write", tr:"yazmak"}
Â  Â  ],
Â  Â  placeAdverbs: [
Â  Â  Â  {eng:"here", tr:"burada, buraya"},
Â  Â  Â  {eng:"there", tr:"orada, oraya"},
Â  Â  Â  {eng:"everywhere", tr:"her yerde"},
Â  Â  Â  {eng:"nowhere", tr:"hiÃ§bir yerde"},
Â  Â  Â  {eng:"somewhere", tr:"bir yerde, bir yere"},
Â  Â  Â  {eng:"anywhere", tr:"herhangi bir yerde"},
Â  Â  Â  {eng:"inside", tr:"iÃ§eride, iÃ§eriye"},
Â  Â  Â  {eng:"outside", tr:"dÄ±ÅŸarÄ±da, dÄ±ÅŸarÄ±ya"},
Â  Â  Â  {eng:"upstairs", tr:"yukarÄ±da, Ã¼st katta"},
Â  Â  Â  {eng:"downstairs", tr:"aÅŸaÄŸÄ±da, alt katta"},
Â  Â  Â  {eng:"above", tr:"yukarÄ±da, Ã¼stte"},
Â  Â  Â  {eng:"below", tr:"aÅŸaÄŸÄ±da, altta"},
Â  Â  Â  {eng:"near", tr:"yakÄ±nlarda, yakÄ±n"},
Â  Â  Â  {eng:"far", tr:"uzakta, uzak"},
Â  Â  Â  {eng:"ahead", tr:"Ã¶nde, ileri"},
Â  Â  Â  {eng:"behind", tr:"arkada, geride"},
Â  Â  Â  {eng:"around", tr:"etrafta, civarda"},
Â  Â  Â  {eng:"away", tr:"uzaÄŸa, uzakta"},
Â  Â  Â  {eng:"over", tr:"Ã¼zerinde (temassÄ±z)"},
Â  Â  Â  {eng:"under", tr:"altÄ±nda"}
Â  Â  ]
};

let currentCategory = 'verbs'; // VarsayÄ±lan kategori
let currentList = allData[currentCategory]; // Åžu anki quiz listesi
let index = 0;
let running = false;
let timers = [];Â 
let learnedVerbEngs = {}; // Kategori bazÄ±nda depolama iÃ§in nesneye dÃ¶nÃ¼ÅŸtÃ¼r
let showDelay = 5000;Â 
let nextDelay = 1000;Â 

// DOM Elementleri
const engEl = document.getElementById('eng');
const turElÂ  = document.getElementById('tur');
const startBtn = document.getElementById('startBtn');
const pauseBtn = document.getElementById('pauseBtn');
const restartBtn = document.getElementById('restartBtn');
const delayEng = document.getElementById('delayEng');
const delayNext = document.getElementById('delayNext');
const delayVal = document.getElementById('delayVal');
const nextVal = document.getElementById('nextVal');
const delayVal2 = document.getElementById('delayVal2'); // Subtitle gÃ¼ncellemesi
const nextVal2 = document.getElementById('nextVal2'); // Subtitle gÃ¼ncellemesi
const progressEl = document.getElementById('progress');
const counterEl = document.getElementById('counter');
const preview = document.getElementById('preview');
const exportBtn = document.getElementById('exportBtn');
const clearStorageBtn = document.getElementById('clearStorageBtn');
const mainTitle = document.getElementById('mainTitle');
const previewTitle = document.getElementById('previewTitle');
const listNameFooter = document.getElementById('listNameFooter');

const categoryRadios = document.querySelectorAll('input[name="category"]');
const STORAGE_KEY = 'learnedWords_AllCategories';Â 


// --- Uygulama YÃ¶netimi FonksiyonlarÄ± ---

function initializeApp(){
Â  Â  loadLearnedWords();
Â  Â  setCategory('verbs'); // Ä°lk yÃ¼klemede fiilleri ayarla
Â  Â  updateDelayValues(delayEng.value, delayNext.value);
}

function updateDelayValues(engDelay, nextDelay){
Â  Â  showDelay = parseInt(engDelay, 10) * 1000;
Â  Â  nextDelay = parseInt(nextDelay, 10) * 1000;
Â  Â  delayVal.textContent = engDelay + "s";
Â  Â  delayVal2.textContent = engDelay + "s";
Â  Â  nextVal.textContent = nextDelay + "s";
Â  Â  nextVal2.textContent = nextDelay + "s";
}


function loadLearnedWords(){
Â  Â  try {
Â  Â  Â  Â  const storedData = localStorage.getItem(STORAGE_KEY);
Â  Â  Â  Â  if(storedData){
Â  Â  Â  Â  Â  Â  learnedVerbEngs = JSON.parse(storedData);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  learnedVerbEngs = { verbs: [], placeAdverbs: [] };
Â  Â  Â  Â  }
Â  Â  } catch(e) {
Â  Â  Â  Â  console.error("Ã–ÄŸrenilen kelimeler yÃ¼klenirken hata:", e);
Â  Â  Â  Â  learnedVerbEngs = { verbs: [], placeAdverbs: [] };
Â  Â  }
}

function saveLearnedWords(){
Â  Â  try {
Â  Â  Â  Â  localStorage.setItem(STORAGE_KEY, JSON.stringify(learnedVerbEngs));
Â  Â  } catch(e) {
Â  Â  Â  Â  console.error("Ã–ÄŸrenilen kelimeler kaydedilirken hata:", e);
Â  Â  }
}

function handleCheckboxChange(e){
Â  Â  const wordEng = e.target.dataset.eng;
Â  Â  const category = e.target.dataset.category;
Â  Â  const categorySet = new Set(learnedVerbEngs[category] || []);

Â  Â  if(e.target.checked){
Â  Â  Â  Â  categorySet.add(wordEng);
Â  Â  } else {
Â  Â  Â  Â  categorySet.delete(wordEng);
Â  Â  }

Â  Â  learnedVerbEngs[category] = Array.from(categorySet);
Â  Â  saveLearnedWords();
Â  Â  filterListForQuiz();
Â  Â  updateProgress();

Â  Â  // Quiz Ã§alÄ±ÅŸÄ±rken liste deÄŸiÅŸirse durdur
Â  Â  if(running){
Â  Â  Â  Â  pauseQuizState(true);
Â  Â  } else if (currentList.length === 0){
Â  Â  Â  Â  showFinishMessage("TÃ¼m kelimeler Ã¶ÄŸrenildi! ðŸŽ‰", "Yeni kelimeler eklemek iÃ§in seÃ§imleri kaldÄ±rÄ±n.");
Â  Â  } else if (index >= currentList.length) {
Â  Â  Â  Â  index = 0;
Â  Â  Â  Â  engEl.textContent = "Liste GÃ¼ncellendi. BaÅŸtan BaÅŸlat.";
Â  Â  Â  Â  turEl.textContent = "Quiz kaldÄ±rdÄ±ÄŸÄ±nÄ±z kelimeleri atlayacak.";
Â  Â  Â  Â  turEl.style.opacity = 1;
Â  Â  }
}


function renderPreviewList(){
Â  Â  // Ã–nceki olay dinleyicilerini kaldÄ±r
Â  Â  document.querySelectorAll('.list-item input[type="checkbox"]').forEach(checkbox => {
Â  Â  Â  Â  checkbox.removeEventListener('change', handleCheckboxChange);
Â  Â  });

Â  Â  const currentAllList = allData[currentCategory];
Â  Â  const currentLearnedSet = new Set(learnedVerbEngs[currentCategory] || []);

Â  Â  preview.innerHTML = currentAllList.map((v, i) => {
Â  Â  Â  Â  const isChecked = currentLearnedSet.has(v.eng) ? 'checked' : '';
Â  Â  Â  Â  const id = `word-${currentCategory}-${v.eng}`;
Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  <div class="list-item">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="${id}" data-eng="${v.eng}" data-category="${currentCategory}" ${isChecked}>
Â  Â  Â  Â  Â  Â  Â  Â  <label for="${id}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>${i+1}.</strong> ${v.eng} â€” <span style="color:#9fb7d4">${v.tr}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  }).join('');
Â  Â Â 
Â  Â  // Checkbox olay dinleyicilerini tekrar ekle
Â  Â  document.querySelectorAll('.list-item input[type="checkbox"]').forEach(checkbox => {
Â  Â  Â  Â  checkbox.addEventListener('change', handleCheckboxChange);
Â  Â  });
}

function filterListForQuiz(){
Â  Â  const currentLearnedSet = new Set(learnedVerbEngs[currentCategory] || []);
Â  Â  currentList = allData[currentCategory].filter(v => !currentLearnedSet.has(v.eng));
Â  Â  if(index >= currentList.length) index = 0;
}


// --- Kategori YÃ¶netimi ---

function updateUITitles(category){
Â  Â  switch(category){
Â  Â  Â  Â  case 'verbs':
Â  Â  Â  Â  Â  Â  mainTitle.textContent = "100 DÃ¼zensiz / YaygÄ±n Fiil â€” Ä°ngilizce â†’ TÃ¼rkÃ§e";
Â  Â  Â  Â  Â  Â  previewTitle.innerHTML = "Fiillerin Ã–nizlemesi";
Â  Â  Â  Â  Â  Â  listNameFooter.textContent = "100 fiil";
Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  case 'placeAdverbs':
Â  Â  Â  Â  Â  Â  mainTitle.textContent = "Yer BelirteÃ§leri (Adverbs of Place) â€” Ä°ngilizce â†’ TÃ¼rkÃ§e";
Â  Â  Â  Â  Â  Â  previewTitle.innerHTML = "Yer BelirteÃ§lerinin Ã–nizlemesi";
Â  Â  Â  Â  Â  Â  listNameFooter.textContent = "Yer BelirteÃ§leri";
Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  default:
Â  Â  Â  Â  Â  Â  mainTitle.textContent = "Ä°ngilizce Quiz";
Â  Â  Â  Â  Â  Â  previewTitle.innerHTML = "Listenin Ã–nizlemesi";
Â  Â  Â  Â  Â  Â  listNameFooter.textContent = "Ã–ÄŸe Listesi";
Â  Â  Â  Â  Â  Â  break;
Â  Â  }
}

function setCategory(category){
Â  Â  if(running) pauseQuizState(false);
Â  Â Â 
Â  Â  currentCategory = category;
Â  Â  updateUITitles(category);
Â  Â  filterListForQuiz();
Â  Â  renderPreviewList();
Â  Â  updateProgress();
Â  Â  index = 0; // Kategori deÄŸiÅŸtiÄŸinde sÄ±fÄ±rla

Â  Â  // ArayÃ¼zÃ¼ baÅŸlatma durumuna getir
Â  Â  engEl.textContent = "HazÄ±r?";
Â  Â  turEl.textContent = "BaÅŸlat dÃ¼ÄŸmesine bas.";
Â  Â  turEl.style.opacity = 0;
Â  Â  startBtn.textContent = "BaÅŸlat";
Â  Â  pauseBtn.disabled = true;
}


// --- Quiz AkÄ±ÅŸ FonksiyonlarÄ± ---

function clearAllTimers(){
Â  timers.forEach(t => clearTimeout(t));
Â  timers = [];
}

function showFinishMessage(engText, turText){
Â  Â  engEl.textContent = engText;
Â  Â  turEl.textContent = turText;
Â  Â  turEl.style.opacity = 1;
Â  Â  running = false;
Â  Â  pauseBtn.disabled = true;
Â  Â  startBtn.textContent = "Yeniden BaÅŸlat";
}

function pauseQuizState(listChanged = false){
Â  Â  clearAllTimers();
Â  Â  running = false;
Â  Â  startBtn.textContent = listChanged ? "Devam Et" : "Devam Et";
Â  Â  pauseBtn.disabled = true;
Â  Â  turEl.textContent = "DuraklatÄ±ldÄ±.";
Â  Â  turEl.style.opacity = 1;
Â  Â  engEl.textContent = currentList.length > 0 && index < currentList.length ? currentList[index].eng : "Liste GÃ¼ncellendi.";
}


function updateProgress(){
Â  const total = allData[currentCategory].length;
Â  const remaining = currentList.length;
Â  const completedInQuiz = index;Â 

Â  const totalCompleted = total - remaining;
Â  const currentProgress = remaining > 0 ? completedInQuiz : 0;

Â  const pct = remaining > 0 ? Math.round((currentProgress/remaining)*100) : 100;
Â  progressEl.style.width = pct + '%';
Â Â 
Â  counterEl.textContent = `${Math.min(currentProgress, remaining)} / ${remaining} (Toplam: ${totalCompleted} Ã¶ÄŸrenilmiÅŸ)`;
}

function showPair(i){
Â  if(currentList.length === 0){
Â  Â  showFinishMessage("TÃ¼m kelimeler Ã¶ÄŸrenildi! ðŸŽ‰", "Yeni kelimeler eklemek iÃ§in seÃ§imleri kaldÄ±rÄ±n.");
Â  Â  index = 0;
Â  Â  updateProgress();
Â  Â  return;
Â  }
Â Â 
Â  if(i >= currentList.length){
Â  Â  showFinishMessage("Bitti âœ…", `Tebrikler â€” kalan ${currentList.length} kelime tamamlandÄ±.`);
Â  Â  index = currentList.length;Â 
Â  Â  updateProgress();
Â  Â  return;
Â  }

Â  const item = currentList[i];
Â  turEl.style.opacity = 0;
Â  engEl.textContent = item.eng;
Â  turEl.textContent = item.tr;
Â  updateProgress();

Â  // show translation after showDelay
Â  const t1 = setTimeout(()=>{
Â  Â  turEl.style.opacity = 1;
Â  }, showDelay);
Â  timers.push(t1);

Â  // schedule next item after showDelay + nextDelay
Â  const t2 = setTimeout(()=>{
Â  Â  index = i + 1;
Â  Â  // proceed if still running
Â  Â  if(running) showPair(index);
Â  }, showDelay + nextDelay);
Â  timers.push(t2);
}

// --- Olay Dinleyicileri ---

startBtn.addEventListener('click', ()=>{
Â  if(currentList.length === 0){
Â  Â  showFinishMessage("TÃ¼m kelimeler Ã¶ÄŸrenildi! ðŸŽ‰", "Yeni kelimeler eklemek iÃ§in seÃ§imleri kaldÄ±rÄ±n.");
Â  Â  return;
Â  }
Â  if(!running){
Â  Â  running = true;
Â  Â  startBtn.textContent = "Ã‡alÄ±ÅŸÄ±yor... (Duraklatmak iÃ§in Durdur'a bas)";
Â  Â  pauseBtn.disabled = false;
Â  Â  if(index >= currentList.length) index = 0;
Â  Â  clearAllTimers();
Â  Â  showPair(index);
Â  }
});

pauseBtn.addEventListener('click', ()=>{
Â  if(running){
Â  Â  pauseQuizState(false);
Â  }
});

restartBtn.addEventListener('click', ()=>{
Â  setCategory(currentCategory); // Kategori ayarÄ±nÄ± koruyarak yeniden baÅŸlat
Â  updateProgress();
});

// Yeni: localStorage'Ä± sÄ±fÄ±rla butonu
clearStorageBtn.addEventListener('click', ()=>{
Â  Â  if(confirm("Emin misiniz? Ã–ÄŸrendiÄŸiniz tÃ¼m kelimeler (checkbox iÅŸaretleri) sÄ±fÄ±rlanacak ve hepsi tekrar quiz'e dahil edilecek.")){
Â  Â  Â  Â  localStorage.removeItem(STORAGE_KEY);
Â  Â  Â  Â  learnedVerbEngs = { verbs: [], placeAdverbs: [] };
Â  Â  Â  Â  clearAllTimers();
Â  Â  Â  Â  running = false;
Â  Â  Â  Â  index = 0;
Â  Â  Â  Â Â 
Â  Â  Â  Â  setCategory(currentCategory); // GÃ¼ncel kategoriyi sÄ±fÄ±rla
Â  Â  Â  Â Â 
Â  Â  Â  Â  // ArayÃ¼zÃ¼ sÄ±fÄ±rlama durumuna getir
Â  Â  Â  Â  engEl.textContent = "TÃ¼m Kelimeler Geri YÃ¼klendi!";
Â  Â  Â  Â  turEl.textContent = "Ã–ÄŸrenilenler sÄ±fÄ±rlandÄ±. BaÅŸlat dÃ¼ÄŸmesine bas.";
Â  Â  Â  Â  turEl.style.opacity = 1;
Â  Â  Â  Â  startBtn.textContent = "BaÅŸlat";
Â  Â  Â  Â  pauseBtn.disabled = true;
Â  Â  Â  Â  alert("Ã–ÄŸrenilen kelime listesi baÅŸarÄ±yla sÄ±fÄ±rlandÄ±.");
Â  Â  }
});

// Kategori SeÃ§imi Dinleyicileri
categoryRadios.forEach(radio => {
Â  Â  radio.addEventListener('change', (e) => {
Â  Â  Â  Â  setCategory(e.target.value);
Â  Â  });
});


delayEng.addEventListener('input', (e)=>{
Â  updateDelayValues(e.target.value, delayNext.value);
});
delayNext.addEventListener('input', (e)=>{
Â  updateDelayValues(delayEng.value, e.target.value);
});

exportBtn.addEventListener('click', ()=>{
Â  const currentAllList = allData[currentCategory];
Â  const txt = currentAllList.map((v,i)=> `${i+1}. ${v.eng} â€” ${v.tr}`).join('\n');
Â  navigator.clipboard.writeText(txt).then(()=> {
Â  Â  exportBtn.textContent = "KopyalandÄ±!";
Â  Â  setTimeout(()=> exportBtn.textContent = "Listeyi Kopyala",1200);
Â  }).catch(()=> {
Â  Â  alert("Kopyalama baÅŸarÄ±sÄ±z. SayfayÄ± manuel olarak kopyalayÄ±n.");
Â  });
});

window.addEventListener('keydown', (e)=>{
Â  if(e.code === "Space"){
Â  Â  e.preventDefault();
Â  Â  if(currentList.length > 0){
Â  Â  Â  if(running) pauseBtn.click(); else startBtn.click();
Â  Â  }
Â  }
});

// initialize: UygulamayÄ± baÅŸlat
initializeApp();
</script>
</body>
</html>
